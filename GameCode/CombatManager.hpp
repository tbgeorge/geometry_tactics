//=================================================================================
// CombatManager.hpp
// Author: Tyler George
// Date  : November 11, 2015
//=================================================================================

#pragma once

#ifndef __included_CombatManager__
#define __included_CombatManager__

///---------------------------------------------------------------------------------
/// Includes
///---------------------------------------------------------------------------------
#include "Engine\Math\IntRange.hpp"
#include "GameCode/GameCommon.hpp"

class Actor;

///---------------------------------------------------------------------------------
/// Structs
///---------------------------------------------------------------------------------

struct AttackData
{
    Actor* attacker;
    Actor* target;
    IntRange damageRange;
    float chanceToHit;
    float chanceToCrit;
    std::string attackVerb;
    IntRange armorRange;
};

struct AttackResult
{
    bool didHit;
    bool didCrit;
    int damageDone;
    bool targetDied;
};

///---------------------------------------------------------------------------------
/// Typedefs
///---------------------------------------------------------------------------------


////===========================================================================================
///===========================================================================================
// CombatManager Class
///===========================================================================================
////===========================================================================================
class CombatManager
{
public:
	///---------------------------------------------------------------------------------
	/// Constructors/Destructors
	///---------------------------------------------------------------------------------
    ~CombatManager();

	///---------------------------------------------------------------------------------
	/// Initialization
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Accessors/Queries
	///---------------------------------------------------------------------------------
    static AttackResult PerformMeleeAttack( const AttackData& data );

	///---------------------------------------------------------------------------------
	/// Mutators
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Update
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Render
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Public Member Variables
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Static Variables
	///---------------------------------------------------------------------------------


private:
	///---------------------------------------------------------------------------------
	/// Private Functions
	///---------------------------------------------------------------------------------
    CombatManager();

	///---------------------------------------------------------------------------------
	/// Private Member Variables
	///---------------------------------------------------------------------------------
    static CombatManager s_theCombatManager;
};

///---------------------------------------------------------------------------------
/// Inline function implementations
///---------------------------------------------------------------------------------

#endif