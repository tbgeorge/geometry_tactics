//=================================================================================
// MainTurnMenu.hpp
// Author: Tyler George
// Date  : November 7, 2015
//=================================================================================

#pragma once

#ifndef __included_MainTurnMenu__
#define __included_MainTurnMenu__

///---------------------------------------------------------------------------------
/// Includes
///---------------------------------------------------------------------------------
#include "GameCode/GameCommon.hpp"
#include "Engine/Input/InputSystem.hpp"
#include "Engine/Renderer/OpenGLRenderer.hpp"
#include "Engine/UI/Image.hpp"
#include "Engine/UI/Button.hpp"
#include "Engine/Utilities/StateMachine.hpp"


///---------------------------------------------------------------------------------
/// Typedefs
///---------------------------------------------------------------------------------

///---------------------------------------------------------------------------------
/// Enums
///---------------------------------------------------------------------------------
enum TurnMenuState
{
    TMS_DO_NOTHING,
    TMS_SWITCH_TO_MOVE,
    TMS_SWITCH_TO_ACT,
    TMS_END_TURN,
    TMS_ENABLE_AI_CONTROL,
    TMS_EXIT
};

////===========================================================================================
///===========================================================================================
// MainTurnMenu Class
///===========================================================================================
////===========================================================================================
class MainTurnMenu
{
public:
	///---------------------------------------------------------------------------------
	/// Constructors/Destructors
	///---------------------------------------------------------------------------------
    MainTurnMenu( OpenGLRenderer* renderer );
    ~MainTurnMenu();

	///---------------------------------------------------------------------------------
	/// Initialization
	///---------------------------------------------------------------------------------
    void Startup();

	///---------------------------------------------------------------------------------
	/// Accessors/Queries
	///---------------------------------------------------------------------------------
    TurnMenuState GetCurrentState() { return (TurnMenuState)m_turnMenuMachine->GetCurrentStateID(); }

	///---------------------------------------------------------------------------------
	/// Mutators
	///---------------------------------------------------------------------------------
    void EnableMove() { m_moveButton->Enable(); }
    void EnableAct() { m_actButton->Enable(); }
    void DisableMove() { m_moveButton->Disable(); }
    void DisableAct() { m_actButton->Disable(); }
    bool IsMoveEnabled() { return m_moveButton->IsEnabled(); }
    bool IsActEnabled() { return m_actButton->IsEnabled(); }
    void Reset();

	///---------------------------------------------------------------------------------
	/// Update
	///---------------------------------------------------------------------------------
    void ProcessInput( InputSystem* inputSystem );
    void Update( bool debugModeEnabled );

	///---------------------------------------------------------------------------------
	/// Render
	///---------------------------------------------------------------------------------
    void Render( bool debugModeEnabled );

	///---------------------------------------------------------------------------------
	/// Public Member Variables
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Static Variables
	///---------------------------------------------------------------------------------


private:
	///---------------------------------------------------------------------------------
	/// Private Functions
	///---------------------------------------------------------------------------------

	///---------------------------------------------------------------------------------
	/// Private Member Variables
	///---------------------------------------------------------------------------------
    OpenGLRenderer* m_renderer;
    Image* m_backgroundImage;
    UIElement* m_buttonParent;
    Button* m_moveButton;
    Button* m_actButton;
    Button* m_enableAIButton;
    Button* m_endTurnButton;
    Button* m_exitButton;

    StateMachine* m_turnMenuMachine;
};

///---------------------------------------------------------------------------------
/// Inline function implementations
///---------------------------------------------------------------------------------

#endif